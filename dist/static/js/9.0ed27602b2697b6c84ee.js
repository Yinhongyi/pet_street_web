webpackJsonp([9],{"3io1":function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e={props:{config:{type:Object,default:function(){return{}}}},components:{},data:function(){return{loading:!1,firstClassifyName:"",imageUrl:"",fileList:[]}},methods:{quit:function(){this.firstClassifyName="",this.imageUrl="",this.$emit("on-quit")},uploadSmallImage:function(t){this.imageUrl=t.imageSmallUrl},confirm:function(){this.firstClassifyName?this.imageUrl?(this.loading=!0,this.config&&this.config.id?this.updateFirstClassify():this.addFirstClassify()):this.$message({message:"请上传图片作为缩略图",type:"error"}):this.$message({message:"请填写一级分类名称",type:"error"})},addFirstClassify:function(){var t=this,i={name:this.firstClassifyName,thumbnail:this.imageUrl};this.$http.post("api/mgmt/platform/classific/save",i).then(function(i){t.loading=!1,1e3===i.code?t.$emit("on-quit"):t.$message({message:i.message,type:"error"})})},updateFirstClassify:function(){var t=this,i={name:this.firstClassifyName,thumbnail:this.imageUrl,id:this.config.id};this.$http.put("api/mgmt/platform/classific/update",i).then(function(i){t.loading=!1,1e3===i.code?t.$emit("on-quit"):t.$message({message:i.message,type:"error"})})},getDetailData:function(t){var i=this;this.loading=!0,this.$http.get("api/mgmt/public/classific/info/"+t).then(function(t){i.loading=!1,1e3===t.code?(i.firstClassifyName=t.data.name,i.imageUrl=t.data.thumbnail):i.$message({message:t.message,type:"error"})})}},created:function(){this.config&&this.config.id&&this.getDetailData(this.config.id)}},a={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"new-or-edit-first-classify"},[s("div",{staticClass:"title-line"},[t._v(t._s(t.config&&t.config.id?"更改":"新增")+"一级分类")]),t._v(" "),s("div",{staticClass:"container"},[s("div",{staticClass:"item"},[s("span",{staticClass:"left"},[t._v("一级分类：")]),t._v(" "),s("span",{staticClass:"right"},[s("el-input",{attrs:{placeholder:"请输入一级分类名称"},model:{value:t.firstClassifyName,callback:function(i){t.firstClassifyName=i},expression:"firstClassifyName"}})],1)]),t._v(" "),s("div",{staticClass:"item"},[s("span",{staticClass:"left"},[t._v("缩略图：")]),t._v(" "),s("span",{staticClass:"right"},[s("pet-upload",{attrs:{imgUrl:t.imageUrl},on:{"on-success":t.uploadSmallImage}})],1)]),t._v(" "),s("div",{staticClass:"footer"},[s("el-button",{attrs:{type:"danger"},on:{click:t.confirm}},[t._v("确认"+t._s(t.config&&t.config.id?"更改":"添加"))]),t._v(" "),s("el-button",{attrs:{type:"info"},on:{click:t.quit}},[t._v("取消")])],1)])])},staticRenderFns:[]};var n={props:{},components:{newOrEdit:s("VU/8")(e,a,!1,function(t){s("Dqc4")},"data-v-0acfcd92",null).exports},data:function(){return{filterStatus:"0",statusConditions:[{value:"0",label:"使用中"},{value:"1",label:"审核中"},{value:"2",label:"停用中"}],firstClassifyList:[],currentPage:1,pageSize:50,total:0,loading:!1,isShowNewFirstClassify:!1,classifyData:{}}},methods:{newFirstClassify:function(){this.classifyData={},this.isShowNewFirstClassify=!0},getFirstClassifyList:function(){var t=this;this.loading=!0,this.$http.get("api/mgmt/public/classific/query?level=1&pid=0&status="+this.filterStatus+"&pageNum="+this.currentPage+"&pageSize="+this.pageSize).then(function(i){t.loading=!1,1e3===i.code?(t.firstClassifyList=i.data&&i.data.rows||[],t.total=i.data&&i.data.total||0):t.$message({message:i.message,type:"error"})})},handleSizeChange:function(t){},handleCurrentChange:function(t){},edit:function(t){this.classifyData=t,this.isShowNewFirstClassify=!0},del:function(t){var i=this,s=[t.id];this.loading=!0,this.$http.delete("api/mgmt/platform/classific/del",{data:s}).then(function(t){i.loading=!1,1e3===t.code?(i.$message({message:t.message,type:"success"}),i.getFirstClassifyList()):i.$message({message:t.message,type:"error"})})},refreshList:function(){this.isShowNewFirstClassify=!1,this.getFirstClassifyList()}},created:function(){this.getFirstClassifyList()}},l={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"classify-first"},[s("div",{staticClass:"new-first-classify"},[s("el-button",{attrs:{type:"danger"},on:{click:t.newFirstClassify}},[t._v("新增一级分类")]),t._v(" "),s("el-select",{attrs:{placeholder:"请选择"},on:{change:function(i){return t.getFirstClassifyList()}},model:{value:t.filterStatus,callback:function(i){t.filterStatus=i},expression:"filterStatus"}},t._l(t.statusConditions,function(t){return s("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"list-table"},[s("table",{staticClass:"table"},[t._m(0),t._v(" "),s("tbody",t._l(t.firstClassifyList,function(i,e){return s("tr",{key:e},[s("td",{staticStyle:{width:"8%"}},[t._v(t._s(e+1))]),t._v(" "),s("td",{staticStyle:{width:"20%"}},[s("img",{staticClass:"img-in-table",attrs:{src:i.thumbnail}})]),t._v(" "),s("td",{staticStyle:{width:"20%"}},[t._v(t._s(i.name))]),t._v(" "),s("td",{staticStyle:{width:"20%"}},[t._v(t._s(i.createTime))]),t._v(" "),s("td",{staticStyle:{width:"20%"}},[s("div",{staticClass:"color-green cursor_pointer",on:{click:function(s){return t.edit(i)}}},[t._v("修改")]),t._v(" "),s("div",{staticClass:"color-red cursor_pointer",on:{click:function(s){return t.del(i)}}},[t._v("删除")])])])}),0)]),t._v(" "),s("el-pagination",{staticClass:"pagination",attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(i){t.currentPage=i},"update:current-page":function(i){t.currentPage=i}}})],1),t._v(" "),t.isShowNewFirstClassify?s("new-or-edit",{attrs:{config:t.classifyData},on:{"on-quit":function(i){return t.refreshList()}}}):t._e()],1)},staticRenderFns:[function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("thead",[s("tr",[s("th",[t._v("序号")]),t._v(" "),s("th",[t._v("缩略图")]),t._v(" "),s("th",[t._v("一级分类")]),t._v(" "),s("th",[t._v("创建时间")]),t._v(" "),s("th",[t._v("操作")])])])}]};var r=s("VU/8")(n,l,!1,function(t){s("WNq4")},"data-v-7ce3e5bc",null);i.default=r.exports},Dqc4:function(t,i){},WNq4:function(t,i){}});
//# sourceMappingURL=9.0ed27602b2697b6c84ee.js.map